# SelfBalancing Robot: REST API - PID (Heading, Pitch and Speed)
**This description applies to `heading`, `pitch` and `speed` resources (these are the variables controlled by PID algorithm). Placeholder `{pid_var}` can be any of those values.**

PID control data and settings.

## Resource
	{
		"state" : [{
			"i": {number},
			"tar": {number},
			"cur": {number},
			"p_err": {number},
			"i_err": {number}
		}],
		"settings" : {
			"integral": {number},
			"proportional": {number},
			"derivative": {number}
		}
	}

|Property|Value|Description|
|---|---|---|
|`state[]`|`list`|PID data generated by PID algorithm executions.|
|`state[].i`|`number`|Time when PID algorithm was executed counting from start of PIC microcontroller. Time unit is 4us. Ex: value `100` indicates that state was generated by an execution of PID algorithm after 800us from the microcontroller boots.|
|`state[].tar`|`number`|Target value. Range: [-16384..16384]|
|`state[].cur`|`number`|Current value of variable controlled by PID algorithm. Range: [-16384..16384]|
|`state[].p_err`|`number`|Previous error value. That is: `state[i-1].cur - state[i-1].tar. Range: [-32768..32768]|
|`state[].i_err`|`number`|Integral error. Range: [-65536..65536]|
|`settings`|`object`|PID constants settings|
|`settings.integral`|`number`|Integral error multiplier. Range: [0..8192]|
|`settings.proportional`|`number`|Proportional error multiplier. Range: [0..8192]|
|`settings.derivative`|`number`|Derivative error multiplier. Range: [0..8192]|

## Methods
### getState
Get PID data generated by last executions of PID algorithm. It retrieves all states from previous call to this method until now.
#### Request
```
GET /rest/{pid_var}/state
```
#### Response
Returns `state` property in response body.
#### Response example
```
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: xxx

[{
	"i": 200000,
	"tar": 0,
	"cur": 1000,
	"p_err": -2000,
	"i_err": 5000
},
{
	"i": 201250,
	"tar": 0,
	"cur": 500,
	"p_err": 1000,
	"i_err": 6000
}]
```

### getSettings
Get PID algorithm constants.
#### Request
```
GET /rest/{pid_var}/settings
```
#### Response
Returns `settings` property in response body.
#### Response example
```
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: xxx

{
	"integral": 0,
	"proportional": 300,
	"derivative": 1500
}
```

### setSettings
Sets PID algorithm constants.
#### Request
```
PUT /rest/{pid_var}/settings
```
#### Request example
```
PUT /rest/heading/settings
Content-Type: application/json;charset=UTF-8

{
	"integral": 0,
	"proportional": 300,
	"derivative": 1500
}
```
#### Response
```
HTTP/1.1 204 No Content
```